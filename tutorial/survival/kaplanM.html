<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Ludivine Morvan, Deep learning for survival</title>
	  <meta name="description" content="Tutorials on survival analysis, machine learning and deep learning.">
	  <meta name="keywords" content="Ludivine Morvan, Deep learning, machine learning, survival analysis, multiple myeloma, Ls2n, CRCINA, Random Survival Forest, RSF, CNN">
	  <meta name="author" content="Ludivine Morvan">
		<link rel="stylesheet" type="text/css" href="../../css/main.css">
		<script id="MathJax-script" async
			src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
	</head>
	<body>
		<div class="entete">
			<h2>Ludivine Morvan</h2>
		</div>
		<nav>
			<ul>
				<li><a href="../../index.html">Home</a></li>
				<li><a href="../../about.html">About me</a></li>
				<li><a href="../../work.html">Current work</a></li>
				<li><a href="../../cv.html">CV</a></li>
				<li><a href="../../publication.html">Publications</a></li>
				<li><a href="../../tutorial.html">Tutorials</a></li>
			</ul>
		</nav>

		<div class="container">
			<div class="tutoNavig">
				<ul>
					<li><a class='t1' href="../survival/survival.html">Survival</a></li>
						<ul>
							<li><a class='t2' href="../survival/survival.html">Generalities</a></li>
							<li><a class='t2' href="../survival/kaplanM.html">Survival statistical learning</a></li>
												<ul>
												<li><a class='t3act' href="../survival/kaplanM.html">Non-parametrics methods</a></li>
												<li><a class='t3' href="../survival/Cox.html">Semi-parametrics methods</a></li>
											</ul>
							<li><a class='t2' href="../survival/RSF.html">Survival machine learning</a></li>
												<ul>
												<li><a class='t3' href="../survival/RSF.html">RSF</a></li>
											</ul>
						</ul>
					<li><a class='t1' href="../MachineLearning/generalities.html">Machine learning</a></li>
					<ul>
						<li><a class='t2' href="../MachineLearning/generalities.html">Generalities</a></li>
						<li><a class='t2' href="../MachineLearning/Boosting.html">Supervised learning</a></li>

						<li><a class='t2' href="../MachineLearning/PCA.html">Unsupervised learning</a></li>

					</ul>
					<li><a class='t1' href="../DeepLearning/generalities.html">Deep
							learning</a></li>
					<ul>
						<li><a class='t2' href="../DeepLearning/generalities.html">Generalities</a></li>
						<li><a class='t2' href="../DeepLearning/layers.html">Layers</a></li>
						<li><a class='t2' href="../DeepLearning/loss.html">Losses</a></li>
					</ul>
				</ul>
			</div><!-- /.tutoNavig -->

			<div class="mainT">

				<div class=arrow>
					<div class=previous>
						<a href= 'survival.html'> <image src=../../previous.png alt='next'
								title='Generalities' width=12% height=12%/> &nbsp; Previous </a>
						</div> <!-- /.previous -->

						<div class=next>
							<a href= 'Cox.html'>Next &nbsp; <image src=../../next.png alt='next'
									title='Semi-parametrics methods' width=15% height=15%/> </a>
							</div> <!-- /.next -->
						</div> <!-- /.arrow -->

				<h2>Non-parametrics methods</h2>
				For survival analysis, the most used methods are statistical analysis.
				Here we will some famous non-parametrics methods.
				<h3> Kaplan Meier </h3>
				<p>The most widely used and simplest survival function estimator when no
					assumptions are made is the
					Kaplan-Meier estimator <a href=#bibliokm>[1]</a>.</p>
				<p>It is used to describe the survival of a population and to estimate the
					median survival and the survival rate at
					a given time but also to compare the survival of different populations,
					often by the logrank test <a href=#ElogRank>[see logRank inset]</a>.
					Thus it is considered that survival after
					a time <em>t</em> is just living
					before <em>t</em> and not die at time <em>t</em> (The event will be
					considered as death in this part, well
					whether it is a relapse or a recovery). Let <em> t &rdquo; 	&lsaquo; t '	&lsaquo; t </em>,</p>
				<p> $$P(X > t) = P(X > t|X>t')  \times  P(X > t'|X>t'')  \times  P(X > t'') $$</p>


				<p>The equation presents the probability of survival at time <em>t</em> as
					the product of :</p>
				<ul>
					<li>P(X > t|X>t') the probability of survival at time <em>t</em> knowing that death did
						not occur at time <em>t'</em>,
						<li> P(X > t'|X>t")  the probability of survival at time <em>t'</em> knowing that death did
							not occur at time <em>t"</em>,
							<li>and P(X > t") the probability of survival at time <em>t"</em>.
							</ul>

							<p>By considering the times of distinct events <em>T<sub>j</sub>(j = 1,...,n)</em> arranged in ascending order, one can
								obtains the probability of survival at time <em>T<sub>j</sub></em> by
								taking the product of the probability of survival at each time <em>T<sub>k &le; j </sub></em>
								knowing that the death did not occur at time <em>T<sub>k-1</sub></em>:</p>
							<p> $$P(t_{i} > T_{j}) = \prod_{k=1}^j P(t_{i} > T_{k}|t_{i} > T_{k-1}) $$</p>

							<p>Considering:</p>
							<ul>
								<li> <em>Y<sub>j</sub></em> the number of individuals at risk just before time <em>T<sub>j</sub></em>,
									<li> <em>d<sub>j</sub></em> the number of events in <em>T<sub>j</sub></em>
										.
									</ul>
									<p>Then the probability <em>p&#770;<sub>j</sub></em> of having an event in
										the interval<em>]T<sub>j-1</sub>,T<sub>j</sub>]</em> knowing
										that one was alive in <em>T<sub>j-1</sub></em>,
										i.e., <em>p&#770;<sub>j</sub>= P(t<sub>i</sub> &le; T<sub>j</sub> |t<sub>i</sub> > T<sub>j-1</sub>)</em>,
										can be estimated by :</p>
									<p> $$p&#770;_{j}=\frac{d_{j}}{Y_{j}}$$</p>
									<p> When the times are assumed to be distinct, <em>d<sub>j</sub>=0</em> when <em>&sigma;<sub>j</sub>=0</em> (censorship), and <em>d<sub>j</sub>=1</em>
										when <em>&sigma;<sub>j</sub>=1</em>. The equation below thus gives the Kaplan-Meier estimator:</p>
										<p> $$ \hat{S}(t)=	\prod_{j=1,...,n, T_{j &le; t}}	(1 - \frac{&sigma;_{j}}{Y_{j}})$$</p>
									<div class=encare id="ElogRank">
										<B style="font-size:1.1em"> Log Rank</B>
										<p>In this context, the log rank is calculated on the survival data of
											the patients. The best separation in two groups will be the one with
											the highest log rank result. </p>
										<p> As for the Kaplan-meier estimate, the logrank test is valid only
											under the assumption of non-informative censoring, i.e., a censoring
											mechanism independent of the observed event</p>
									</div>




									<p> Survival curves can thus be plotted on a graph, usually with a 95% confidence interval. These graphs
										allow to see clearly the difference between the
										survival curves of two groups.</p>
									<figure>
										<img id="cvk" src="./images/ex_kaplan.png" alt="kaplan_Meier_curve"
											title="KM_curves" height=60% width=60% />
										<figcaption> Example of Kaplan Meier curves showing the survival of
											two groups. In pink, the women
											and men in blue. Reading: 75% of the women are alive at 1000 days against 50% for men.</figcaption>
									</figure>
									<p> Kaplan-Meier's survival curves are represented by a staircase graph
										of heights
										unequal, where the occurrence of one or more events on the same date
										represents the vertical of a step (the
										height of the step proportional to the number of events). This is
										illustrated in the <a href=#cvk>figure</a>
										The Kaplan-Meier equivalent method is the actuarial method. It differs
										in that the calculations are not made at the time when events occur but at regular fixed times,
										which gives a curve
										in straight line segments.</p>




									<h3> Nelson-Aelen estimator</h3>
									<p> The Nelson-Aalen estimator is an alternative method for estimating
										the survival function S(t) in time
										continuous<a href=#bibliokm>[2]</a>. Let <em>H(t)</em> be the
										cumulative hazard function. In the continuous case: </p>

									<p>$$ H(t) = \int_{t_{0}}^{t} h(s)ds = -ln(S(t)) $$</p>
									<p>And so on: </p>

									<p>$$ S(t) = e^{-H(t)} $$</p>
									<p> The idea is to estimate <em>S(t)</em> from an estimator of <em>H(t)</em>.
										By considering all the instants <em>T<sub>j</sub></em> where
										events occur up to time <em>t</em>, we have:</p>

									<p>$$ \hat{H}(t) = \sum_{T_{j} &le; t} \Rightarrow \hat{S}(t)=e^{
											\hat{H}(t)} $$</p>

									<p> with <em>d<sub>j</sub></em> the number of events occurring in <em>T<sub>j</sub></em>, and
										<em>Y<sub>j</sub></em>the number of individuals at risk of the event
										just before the time <em>T<sub>j</sub></em></p>

									<h3> Comparison between Kaplan-Meier and Nelson-Aelen</h3>
									<p> Asymptotically, Kaplan-Meier and Nelson-Aalen are equivalent.
										However, it is preferable to use Kaplan-Meier when the hazard decreases over time, on small samples,
										and Nelson-Aalen when the chance increases over time.
										Other estimators exist such as the Breslow estimator of cumulative
										risk, the Harrington estimator, and	Fleming of survival. [For more details see the course of A.
										Berchtold's <a href=#bibliokm>[3]</a> or that of P. Saint-Pierre <a
											href=#bibliokm>[2]</a>,	from which the definitions are taken].</p>

									<div class=biblio id="bibliokm">
										<h1>References</h1>
										<p>[1] Gilbert Colletaz. Modèles de survie. Notes de Cours MASTER 2
											ESA voies professionnelle et recherche,
											université d’Orleans. </p>
										<p>[2] Philippe Saint-Pierre. Introduction à l’analyse des durées de
											survie. Université Pierre et Marie Curie. </p>
										<p>[3] Andre Berchtold. Données longitudinales et modèles de survie,
											courbes de survie. Département des
											sciences économiques, Université de Genève. Cours de Master. </p>



									</div>
									<div class=arrow>
										<div class=previous>
											<a href= 'survival.html'> <image src=../../previous.png alt='next'
													title='Generalities' width=12% height=12%/> &nbsp; Previous </a>
											</div> <!-- /.previous -->

											<div class=next>
												<a href= 'Cox.html'>Next &nbsp; <image src=../../next.png alt='next'
														title='Semi-parametrics methods' width=15% height=15%/> </a>
												</div> <!-- /.next -->
											</div> <!-- /.arrow -->

										</div><!-- /.mainT -->
									</div><!-- /.container -->


									<footer>
										<ul>
											<li><a href="mailto:ludivine.morvan@ls2n.fr">email</a></li>

											<!--<li><a href="https://github.com/ludivinemv">github</a></li>-->
											<li><a href="https://www.researchgate.net/profile/Ludivine_Morvan">researchgate</a></li>
											<li><a href="https://www.linkedin.com/in/ludivine-morvan-884153151/">linkedin</a></li>
										</ul>
									</footer>
								</body>
							</html>
